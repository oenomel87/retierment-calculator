# 퇴직금 정산 규칙 (프로그램 역분석)

이 문서는 고용노동부 퇴직금 계산기 화면(`retire_cal.html`)과 계산 로직(`resources/retire_cal.js`)을
기준으로 퇴직금 정산 규칙을 정리한 것입니다. 실제 법령/회사 내규와 차이가 있을 수 있습니다.

## 0. 용어 정리
| 용어 | 의미 |
| --- | --- |
| 평균임금 산정기간 | 퇴직일자 이전 3개월(기본) |
| 산정기간 총일수 | 평균임금 산정기간의 전체 일수 |
| 산정기간 유효일수 | 산정기간 총일수에서 미산입기간을 차감한 일수 |
| 미산입기간 | 평균임금 산정에서 제외되는 기간(예: 육아휴직 등) |
| 근무제외기간 | 재직일수에서 제외되는 기간 |
| 1일 평균임금 | 산정기간 임금총액을 산정기간 유효일수로 나눈 값 |
| 1일 통상임금 | 통상임금 기준 1일 임금(입력값) |

## 1. 입력 및 검증 규칙
- 입사일자/퇴직일자는 유효한 날짜여야 함(1901~9999, 월 1~12, 일은 해당 월 최대일 범위).
- 퇴직일자는 입사일자 이후여야 함.
- 퇴직일자는 “마지막 근무일의 다음 날”로 입력하도록 안내됨.
- 재직기간은 1년 이상이어야 함(퇴직일자 기준 1년 전보다 입사일자가 늦으면 오류).

### 평균임금 산정 제외기간(미산입기간)
- 시작/종료일 모두 필수.
- 입사일자 이전/퇴직일자 이후 날짜는 불가.
- 종료일은 퇴직일자와 동일 불가(퇴직일자 직전일까지).
- 시작일이 종료일보다 이후면 오류.
- 기간 중복 불가(시작 또는 종료가 다른 기간에 포함되면 중복으로 판단).
- 입력 행은 최대 6개까지.

### 재직일수 제외기간(근무제외기간)
- 검증 규칙은 미산입기간과 동일.
- 입력 행은 최대 6개까지.

## 2. 재직일수 산정
- 재직일수 = 퇴직일자 − 입사일자(일수 차이를 올림 처리).
- 근무제외기간이 있으면 각 기간의 일수(시작~종료일 포함)를 합산해 재직일수에서 차감.

## 3. 평균임금 산정기간 산정(퇴직일자 이전 3개월)
- 기본적으로 퇴직일자 이전 3개월을 산정기간으로 사용.
- 퇴직일자가 월 1일이면 3개 구간(3개월)로 구성.
- 그 외에는 4개 구간으로 구성:
  - 1구간: 퇴직일자의 “일자”와 같은 날짜를 기준으로 시작(해당 월의 일수가 부족하면 월말 기준으로 보정).
  - 2~3구간: 해당 월 전체(1일~말일).
  - 4구간: 해당 월 1일 ~ (퇴직일자 − 1일).
- 특수 처리: 퇴직일자가 5/29(윤년 제외), 5/30, 5/31이면 2월 계산을 피하기 위해 3개 구간으로 처리.

### 미산입기간에 따른 산정기간 보정
- 미산입기간이 **퇴직일자 직전일까지 이어지고**, 그 시작일이 **퇴직일자 3개월 이전보다 빠르면**
  평균임금 산정기간을 “미산입기간 시작일 직전일까지의 3개월”로 이동.
- 산정기간과 미산입기간이 겹치는 경우, 겹친 일수만큼 각 구간의 일수와 산정기간 유효일수에서 차감.
- 산정기간 총일수는 변하지 않으며, 산정기간 유효일수만 줄어든다.

## 4. 임금 합산 및 1일 평균임금
- 산정기간별 기본급/기타수당을 합산하여 임금총액(기본급 합계 + 기타수당 합계)을 산출.
- 연간상여금/연차수당은 기본적으로 **연간액의 1/4(3/12)**만 산입.
- 미산입기간으로 산정기간 유효일수가 줄어든 경우:
  - 연간상여금, 연차수당 산입액 = 입력액 × 1/4 × (산정기간 유효일수 / 산정기간 총일수).
- 임금총액(산정) = 기본급 합계 + 기타수당 합계 + 연간상여금 산입액 + 연차수당 산입액.
- 1일 평균임금 = 임금총액(산정) / 산정기간 유효일수, **소수 둘째 자리까지 올림** 처리.

## 5. 퇴직금 계산
- 1일 통상임금이 1일 평균임금보다 크면 통상임금을 기준으로 사용.
- 퇴직금 = (기준 1일 임금) × 30 × (재직일수 / 365).
- 결과는 원 단위로 반올림 후 표시(정수).

## 6. 계산식 요약표
| 항목 | 산식/규칙 | 비고 |
| --- | --- | --- |
| 재직일수 | 퇴직일자 − 입사일자 | 일수 차이 올림 |
| 산정기간 총일수 | 퇴직일자 이전 3개월 일수 합 | 구간 합산 |
| 산정기간 유효일수 | 산정기간 총일수 − 미산입기간 일수 | 겹친 일수만 차감 |
| 연간상여금 산입액 | 연간상여금 × 1/4 × (유효일수/총일수) | 미산입기간 없으면 1/4 |
| 연차수당 산입액 | 연차수당 × 1/4 × (유효일수/총일수) | 미산입기간 없으면 1/4 |
| 1일 평균임금 | 임금총액(산정) / 산정기간 유효일수 | 소수 둘째 자리 올림 |
| 퇴직금 | 기준 1일 임금 × 30 × (재직일수/365) | 원 단위 반올림 |

## 7. 계산 예시(화면 내 제공 예제 기준)

### 7.1 입력 조건
| 항목 | 값 |
| --- | --- |
| 입사일자 | 2014-10-02 |
| 퇴직일자 | 2017-09-16 |
| 재직일수 | 1,080일 |
| 월 기본급 | 2,000,000원 |
| 월 기타수당 | 360,000원 |
| 연간상여금 | 4,000,000원 |
| 연차수당(발생 후 미사용) | 300,000원(60,000원 × 5일) |

### 7.2 퇴직일자 이전 3개월 임금총액
| 기간 | 기간별 일수 | 기본급 | 기타수당 | 합계 |
| --- | --- | --- | --- | --- |
| 2017.06.16 ~ 2017.06.30 | 15일 | 1,000,000원 | 180,000원 | 1,180,000원 |
| 2017.07.01 ~ 2017.07.31 | 31일 | 2,000,000원 | 360,000원 | 2,360,000원 |
| 2017.08.01 ~ 2017.08.31 | 31일 | 2,000,000원 | 360,000원 | 2,360,000원 |
| 2017.09.01 ~ 2017.09.15 | 15일 | 1,000,000원 | 180,000원 | 1,180,000원 |
| 합계 | 92일 | 6,000,000원 | 1,080,000원 | 7,080,000원 |

### 7.3 가산 항목(3개월 환산)
| 항목 | 연간/총액 | 3개월 환산액 |
| --- | --- | --- |
| 연간상여금 | 4,000,000원 | 1,000,000원 |
| 연차수당 | 300,000원 | 75,000원 |

### 7.4 평균임금 및 퇴직금
- 1일 평균임금 = (7,080,000원 + 1,000,000원 + 75,000원) / 92일
  = 88,641.31원(소수 둘째 자리 올림)
- 퇴직금 = 88,641.31원 × 30 × (1,080/365)
  = 7,868,434원(원 단위 반올림)

## 근거 코드 위치
- `retire_cal.html`
- `resources/retire_cal.js`
- `resources/retire_util.js`
